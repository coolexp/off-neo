(function(){var base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var cppCallFunction=null;function utf16to8(str){var out,i,len,c;out="";len=str.length;for(i=0;i<len;i++){c=str.charCodeAt(i);if((c>=1)&&(c<=127)){out+=str.charAt(i)}else{if(c>2047){out+=String.fromCharCode(224|((c>>12)&15));out+=String.fromCharCode(128|((c>>6)&63));out+=String.fromCharCode(128|((c>>0)&63))}else{out+=String.fromCharCode(192|((c>>6)&31));out+=String.fromCharCode(128|((c>>0)&63))}}}return out}function base64encode(str){var out,i,len;var c1,c2,c3;len=str.length;i=0;out="";while(i<len){c1=str.charCodeAt(i++)&255;if(i==len){out+=base64EncodeChars.charAt(c1>>2);out+=base64EncodeChars.charAt((c1&3)<<4);out+="==";break}c2=str.charCodeAt(i++);if(i==len){out+=base64EncodeChars.charAt(c1>>2);out+=base64EncodeChars.charAt(((c1&3)<<4)|((c2&240)>>4));out+=base64EncodeChars.charAt((c2&15)<<2);out+="=";break}c3=str.charCodeAt(i++);out+=base64EncodeChars.charAt(c1>>2);out+=base64EncodeChars.charAt(((c1&3)<<4)|((c2&240)>>4));out+=base64EncodeChars.charAt(((c2&15)<<2)|((c3&192)>>6));out+=base64EncodeChars.charAt(c3&63)}return out}function baseEncodeURI(value,isSafe){var out=base64encode(utf16to8(value));if(!isSafe){return out}return out.replace(/[+\/]/g,function(m0){return m0=="+"?"-":"_"}).replace(/=/g,"")}function sendToCppJson(json){var bs64Value=baseEncodeURI(JSON.stringify(json),true);var link=document.createElement("a");link.setAttribute("href","aicarb:"+bs64Value);link.click()}function sendToCppJsonString(json){var bs64Value=baseEncodeURI(json,true);var link=document.createElement("a");link.setAttribute("href","aicarb:"+bs64Value);link.click()}function sendToJs(value){if(cppCallFunction==null){return}try{cppCallFunction(value)}catch(e){}}function registerHandler(callback){cppCallFunction=callback}window.NeoLib={encode:baseEncodeURI,sendToCppJson:sendToCppJson,sendToCpp:sendToCppJsonString,sendToJs:sendToJs,registerCppCall:registerHandler}})();